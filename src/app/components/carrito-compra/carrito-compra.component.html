<div fxLayout="column" class="sic-com-carrito-compra">
  <div *ngIf="loadingPedido" fxLayoutAlign="center center" class="sic-comSpinnerDiv">
    <mat-spinner [diameter]="50" [strokeWidth]="6"></mat-spinner>
  </div>
  <div *ngIf="!loadingPedido">
    <div fxLayout="column">
      <div fxLayoutAlign="start center" class="sic-com-ir-listado" [routerLink]="['productos']">
        <mat-icon>keyboard_arrow_left</mat-icon>
        <strong>Ir al listado</strong>
      </div>
      <div fxLayoutAlign="space-around center" class="sic-com-totalizadores">
        <span>Cant. Articulos: {{cantidadArticulos}}</span>
        <span>Total: {{totalLista | sicComCurrency }}</span>
      </div>
      <div fxLayoutAlign="space-around center" class="sic-com-botonera">
        <button mat-raised-button (click)="openDialogCliente()" disabled="{{(itemsCarritoCompra.length == 0)}}" color="primary">
          <mat-icon>account_circle</mat-icon>
          <span fxHide.lt-md>Asignar Cliente</span>
        </button>
        <button mat-raised-button (click)="vaciarPedido()" disabled="{{(itemsCarritoCompra.length == 0)}}">
          <mat-icon>remove_shopping_cart</mat-icon>
          <span fxHide.lt-md>Limpiar Listado</span>
        </button>
        <button mat-raised-button (click)="openDialogCheckout()" disabled="{{(clienteSeleccionado.length == 0) || (itemsCarritoCompra.length == 0)}}" color="primary">
          <mat-icon>local_shipping</mat-icon>
          <span fxHide.lt-md>Cerrar Orden</span>
        </button>
      </div>
    </div>
    <div *ngFor="let icc of itemsCarritoCompra" fxLayout.lt-md="column" class="sic-com-renglones-items">
      <div fxFlex.lt-md="100" fxFlex.gt-sm="60">
        <div fxFlex="25" fxLayoutAlign="center center">
          <img class="sic-com-img-avatar" src="../../assets/no-image.png">
        </div>
        <div fxFlex="55" fxLayoutAlign="start center" [routerLink]="['/producto/' + icc.producto.id_Producto]">
          <span class="sic-com-descripcion-producto">{{icc.producto.descripcion}}</span>
        </div>
        <div fxFlex="20" fxLayoutAlign="center center">
          <strong>{{icc.producto.precioLista | sicComCurrency }}</strong>
        </div>
      </div>
      <div fxFlex.lt-md="100" fxFlex.gt-sm="40">
        <div fxFlex="50" fxLayoutAlign="center center">
          <button mat-mini-fab color="accent" (click)="editCantidadProducto(icc, -1, 1)"
                  disabled="{{(icc.cantidad <= icc.producto.ventaMinima)}}">
            <mat-icon>remove</mat-icon>
          </button>
          <mat-form-field class="sic-com-input-cantidad">
            <input matInput #cantCart type="number" placeholder="Cantidad"
                   value="{{icc.cantidad}}" min="{{icc.producto.ventaMinima}}"
                   (keyup.enter)="editCantidadProducto(icc, cantCart.value, 2)">
          </mat-form-field>
          <button mat-mini-fab color="primary" (click)="editCantidadProducto(icc, 1, 3)">
            <mat-icon>add</mat-icon>
          </button>
        </div>
        <div fxFlex="35" fxLayoutAlign="center center">
          <strong>{{cantCart.value * icc.producto.precioLista | sicComCurrency}}</strong>
        </div>
        <div fxFlex="15" fxLayoutAlign="center center">
          <button mat-icon-button (click)="eliminarItemDelCarrito(icc)" matTooltip="Quitar del listado">
            <mat-icon>delete_forever</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div fxLayoutAlign="center center" class="sic-com-mas-resultados" (click)="masProductosPedido()"
       *ngIf="(itemsCarritoCompra.length > 0) && (totalPaginas > (pagina + 1)) && !loadingRenglones">
    <strong>MAS RESULTADOS</strong>
  </div>
  <div class="sic-com-mas-resultados" fxLayoutAlign="center center" *ngIf="loadingRenglones">
    <mat-spinner [diameter]="50" [strokeWidth]="6"></mat-spinner>
  </div>
</div>
